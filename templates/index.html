<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bollywood Song Recommendation System</title>
    <link rel="stylesheet" href="https://my-bollywood-static-files.s3.amazonaws.com/static/css/style.css">
    <link rel="icon" href="https://my-bollywood-static-files.s3.amazonaws.com/static/favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="header-container">
        <h1>Bollywood Song Recommendation System</h1>
    </div>
    <div class="container">
        <p class="choose-song-text" style="text-align: center">Choose your song</p>
        <form method="POST">
            <div class="select-wrapper" style="max-width: 500px; margin: 0 auto">
                <div  style="display: flex;flex-direction: column;width: 70%;">
                    <select name="song_name" id="song_name" onchange="updateImage()">
                        {% for song in all_songs %}
                            <option value="{{ song.name }}" {% if song.name == song_name %}selected{% endif %}>
                                {{ song.name }}
                            </option>
                        {% endfor %}
                    </select>
                    <button type="submit">Recommend</button>
                </div>
                <img src="{{ selected_song_image }}" alt="Selected Song Image" class="selected-song-image" id="selected_song_image">
            </div>
        </form>
        <div class="recommendations">
            {% for recommendation in recommendations %}
                <div class="song">
                    <a href="{{ recommendation.spotify_link }}" target="_blank">
                        <img src="{{ recommendation.thumbnail }}" alt="{{ recommendation.song_name }}">
                        <p class="song-title">{{ recommendation.song_name }}</p>
                    </a>
                    <a href="{{ recommendation.artist_link }}" target="_blank" class="artist-name">
                        <p>{{ recommendation.artist_name }}</p>
                    </a>
                </div>
            {% endfor %}
        </div>
    </div>
    <script>
        const songsData = {{ songs_data | tojson }};
        const S3_BASE_URL = "{{ S3_BASE_URL }}";
        function updateImage() {
            const songName = document.getElementById('song_name').value;
            const songData = songsData.find(song => song.song_name === songName);
            if (songData) {
                const songIndex = songsData.indexOf(songData);
                const imageUrl = `${S3_BASE_URL}/images/${songIndex}.jpg`;
                document.getElementById('selected_song_image').src = imageUrl;
            }
        }
    </script> 
</body>
</html>
